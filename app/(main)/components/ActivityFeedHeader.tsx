'use client';

import React, { useState } from 'react';
import NotificationDropdown from '@/app/components/features/NotificationDropdown';
import FeedbackModal from '@/app/components/features/FeedbackModal';

interface ActivityFeedHeaderProps {
  userId: string | null;
  onCreatePost: () => void;
  onPostClick: (postId: string) => void;
}

/**
 * Header component for the activity feed page
 * Contains title, notifications, and create post button
 */
export default function ActivityFeedHeader({ userId, onCreatePost, onPostClick }: ActivityFeedHeaderProps) {
  const [showFeedback, setShowFeedback] = useState(false);

  return (
    <>
      <div className="flex flex-col gap-4 justify-between items-start mb-4 w-full sm:flex-row sm:items-center">
        <h1 className="text-2xl font-medium text-onsurface-primary">Activity Feed</h1>

        <div className="flex gap-3 items-center">
          {/* Notification Button */}
          {userId && (
            <NotificationDropdown
              userId={userId}
              onPostClick={onPostClick}
            />
          )}

          {/* Feedback Button */}
          <button
            onClick={() => setShowFeedback(true)}
            className="p-2 hover:bg-surface-container-muted rounded-lg transition-colors text-onsurface-primary"
            title="Send Feedback (⌘⇧F)"
          >
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" id="Feedback--Streamline-Flex-Remix" height="24" width="24">
              <desc>
                Feedback Streamline Icon: https://streamlinehq.com
              </desc>
              <g id="feedback">
                <path id="Union" fill="currentColor" fillRule="evenodd" d="M12.42001714285714 2.571428571428571c-2.145685714285714 0 -4.502142857142857 0.1901142857142857 -6.670748571428571 0.43587428571428566 -1.0067314285714286 0.11408571428571428 -1.8000514285714284 0.9117599999999999 -1.9107942857142857 1.9243542857142857 -0.23629714285714282 2.160822857142857 -0.42696 4.5152399999999995 -0.42696 6.648342857142857 0 1.7598 0.12983999999999998 3.6748971428571426 0.30851999999999996 5.509457142857142 0.010782857142857141 0.11082857142857142 0.004234285714285714 0.22259999999999996 -0.019405714285714287 0.33145714285714284l-0.7918114285714286 3.6423428571428564 3.3205714285714283 -0.7906285714285713c0.117 -0.027942857142857137 0.23785714285714288 -0.035828571428571425 0.35751428571428573 -0.023657142857142856 1.929325714285714 0.198 3.9617999999999993 0.33959999999999996 5.833114285714285 0.33959999999999996 2.1469199999999997 0 4.5059314285714285 -0.18634285714285714 6.675068571428572 -0.4297714285714285 1.0057714285714285 -0.11279999999999998 1.7986285714285712 -0.9097714285714285 1.9088571428571426 -1.9220571428571427 0.23537142857142856 -2.1633085714285714 0.4246285714285714 -4.522662857142857 0.4246285714285714 -6.6567428571428575 0 -2.1334799999999996 -0.18908571428571427 -4.488188571428571 -0.4244571428571428 -6.64872 -0.11022857142857141 -1.0122514285714286 -0.9032571428571429 -1.8098571428571426 -1.910057142857143 -1.9239085714285713C16.92433714285714 2.7615771428571425 14.565959999999999 2.571428571428571 12.42001714285714 2.571428571428571ZM5.507965714285714 0.8780725714285714C7.716137142857143 0.6278262857142857 10.161205714285714 0.42857142857142855 12.42001714285714 0.42857142857142855c2.2590171428571426 0 4.705971428571429 0.19929085714285713 6.915240000000001 0.4495697142857143 2.0076 0.22743428571428573 3.580971428571429 1.817538857142857 3.7992 3.8211102857142856 0.2388 2.193377142857143 0.43697142857142857 4.635291428571429 0.43697142857142857 6.880748571428571 0 2.2459371428571426 -0.19817142857142855 4.692428571428571 -0.4371428571428571 6.888514285714285 -0.21805714285714287 2.003657142857143 -1.7914285714285711 3.5943428571428564 -3.8002285714285713 3.819771428571429 -2.2099714285714285 0.24805714285714284 -4.656154285714285 0.4431428571428571 -6.91404 0.4431428571428571 -1.9098 0 -3.951891428571429 -0.13954285714285714 -5.870502857142856 -0.3324l-4.801337142857142 1.143257142857143c-0.35829085714285713 0.08537142857142856 -0.7352914285714286 -0.01937142857142857 -0.9982782857142857 -0.2772 -0.2629885714285714 -0.25799999999999995 -0.3750942857142857 -0.632742857142857 -0.2968525714285714 -0.992742857142857l1.1180365714285714 -5.142925714285714C1.3970554285714285 15.307782857142856 1.2686571428571427 13.38042857142857 1.2686571428571427 11.579999999999998c0 -2.245885714285714 0.1998342857142857 -4.688142857142857 0.4396662857142857 -6.881279999999999C1.9273714285714285 2.6956285714285713 3.500314285714286 1.1055925714285713 5.507965714285714 0.8780725714285714ZM7.6368857142857145 9.91992c-0.4734 0 -0.8571428571428571 0.38376 -0.8571428571428571 0.8571428571428571 0 3.216137142857143 2.6071885714285714 5.8233428571428565 5.823325714285714 5.8233428571428565 3.216137142857143 0 5.823274285714286 -2.607205714285714 5.823274285714286 -5.8233428571428565 0 -0.4733828571428571 -0.3836571428571428 -0.8571428571428571 -0.8571428571428571 -0.8571428571428571H7.6368857142857145Z" clip-rule="evenodd" stroke-width="1.7143"></path>
              </g>
            </svg>
          </button>

          {/* New Post Button */}
          <button
            onClick={onCreatePost}
            data-create-post-trigger
            className="px-4 py-2 hover:bg-primary-hover text-primary hover:text-surface-container-muted border-border border-[1px] rounded-full bg-surface-container transition-colors flex items-center gap-2 text-base font-medium"
          >
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16" id="Add-1--Streamline-Flex-Remix" height="16" width="16">
              <desc>
                Add 1 Streamline Icon: https://streamlinehq.com
              </desc>
              <g id="add-1--expand-cross-buttons-button-more-remove-plus-add-+-mathematics-math">
                <path id="Union" fill="currentColor" fillRule="evenodd" d="M8.714285714285714 0.7142857142857142C8.714285714285714 0.31979657142857143 8.394491428571428 0 8 0s-0.7142857142857142 0.31979657142857143 -0.7142857142857142 0.7142857142857142v6.571428571428571H0.7142857142857142C0.31979657142857143 7.285714285714286 0 7.605508571428571 0 8s0.31979657142857143 0.7142857142857142 0.7142857142857142 0.7142857142857142h6.571428571428571v6.571428571428571c0 0.3945142857142857 0.3197942857142857 0.7142857142857142 0.7142857142857142 0.7142857142857142s0.7142857142857142 -0.31977142857142854 0.7142857142857142 -0.7142857142857142v-6.571428571428571h6.571428571428571c0.3945142857142857 0 0.7142857142857142 -0.3197942857142857 0.7142857142857142 -0.7142857142857142s-0.31977142857142854 -0.7142857142857142 -0.7142857142857142 -0.7142857142857142h-6.571428571428571V0.7142857142857142Z" clip-rule="evenodd" stroke-width="1.1429"></path>
              </g>
            </svg>
            <span>Create</span>
          </button>
        </div>
      </div>

      {/* Feedback Modal */}
      <FeedbackModal
        isOpen={showFeedback}
        onClose={() => setShowFeedback(false)}
      />
    </>
  );
}