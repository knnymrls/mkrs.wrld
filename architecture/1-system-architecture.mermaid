graph TB
    subgraph "Client Layer"
        UI[Next.js App Router]
        Auth[Auth Context]
        Components[React Components]
    end
    
    subgraph "API Layer"
        ChatAPI[Chat API<br/>Dual Agent System]
        EmbeddingAPI[Embeddings API]
        NotifAPI[Notifications API]
    end
    
    subgraph "External Services"
        OpenAI[OpenAI API<br/>GPT-4o-mini & Embeddings]
        Supabase[Supabase Platform]
    end
    
    subgraph "Data Layer"
        PostgreSQL[(PostgreSQL<br/>+ pgvector)]
        Storage[Supabase Storage<br/>Images]
        Realtime[Realtime<br/>Subscriptions]
    end
    
    UI --> Auth
    UI --> Components
    Components --> ChatAPI
    Components --> NotifAPI
    Components --> Supabase
    
    ChatAPI --> OpenAI
    EmbeddingAPI --> OpenAI
    
    ChatAPI --> PostgreSQL
    NotifAPI --> PostgreSQL
    Supabase --> PostgreSQL
    Supabase --> Storage
    Supabase --> Realtime